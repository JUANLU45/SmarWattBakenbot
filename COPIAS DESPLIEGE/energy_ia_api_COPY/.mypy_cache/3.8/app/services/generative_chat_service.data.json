{".class":"MypyFile","_fullname":"app.services.generative_chat_service","future_import_flags":[],"is_partial_stub_package":false,"is_stub":false,"names":{".class":"SymbolTable","Any":{".class":"SymbolTableNode","cross_ref":"typing.Any","kind":"Gdef","module_hidden":true,"module_public":false},"AppError":{".class":"SymbolTableNode","cross_ref":"utils.error_handlers.AppError","kind":"Gdef","module_hidden":true,"module_public":false},"Dict":{".class":"SymbolTableNode","cross_ref":"typing.Dict","kind":"Gdef","module_hidden":true,"module_public":false},"EnterpriseAuth":{".class":"SymbolTableNode","cross_ref":"smarwatt_auth.auth.EnterpriseAuth","kind":"Gdef","module_hidden":true,"module_public":false},"EnterpriseGenerativeChatService":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"TypeInfo","_promote":[],"abstract_attributes":[],"alt_promote":null,"bases":["builtins.object"],"dataclass_transform_spec":null,"declared_metaclass":null,"defn":{".class":"ClassDef","fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService","name":"EnterpriseGenerativeChatService","type_vars":[]},"deletable_attributes":[],"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService","has_param_spec_type":false,"metaclass_type":null,"metadata":{},"module_name":"app.services.generative_chat_service","mro":["app.services.generative_chat_service.EnterpriseGenerativeChatService","builtins.object"],"names":{".class":"SymbolTable","__init__":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["self"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.__init__","name":"__init__","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"__init__ of EnterpriseGenerativeChatService","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_add_links_if_user_requests":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["self","user_message","response_text"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._add_links_if_user_requests","name":"_add_links_if_user_requests","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["self","user_message","response_text"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService","builtins.str","builtins.str"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_add_links_if_user_requests of EnterpriseGenerativeChatService","ret_type":"builtins.str","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_analyze_message_sentiment":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","message"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._analyze_message_sentiment","name":"_analyze_message_sentiment","type":{".class":"CallableType","arg_kinds":[0,0],"arg_names":["self","message"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService","builtins.str"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_analyze_message_sentiment of EnterpriseGenerativeChatService","ret_type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_analyze_response_quality":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0],"arg_names":["self","user_message","response","user_context"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._analyze_response_quality","name":"_analyze_response_quality","type":{".class":"CallableType","arg_kinds":[0,0,0,0],"arg_names":["self","user_message","response","user_context"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService","builtins.str","builtins.str",{".class":"UnionType","items":[{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_analyze_response_quality of EnterpriseGenerativeChatService","ret_type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_build_enhanced_message":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0],"arg_names":["self","user_message","user_context","sentiment_analysis"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._build_enhanced_message","name":"_build_enhanced_message","type":{".class":"CallableType","arg_kinds":[0,0,0,0],"arg_names":["self","user_message","user_context","sentiment_analysis"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService","builtins.str",{".class":"UnionType","items":[{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_build_enhanced_message of EnterpriseGenerativeChatService","ret_type":"builtins.str","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_build_enterprise_system_instruction":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["self"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._build_enterprise_system_instruction","name":"_build_enterprise_system_instruction","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_build_enterprise_system_instruction of EnterpriseGenerativeChatService","ret_type":"builtins.str","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_build_user_context_prompt":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","user_context"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._build_user_context_prompt","name":"_build_user_context_prompt","type":{".class":"CallableType","arg_kinds":[0,0],"arg_names":["self","user_context"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService",{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_build_user_context_prompt of EnterpriseGenerativeChatService","ret_type":"builtins.str","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_calculate_data_completeness":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","user_context"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._calculate_data_completeness","name":"_calculate_data_completeness","type":{".class":"CallableType","arg_kinds":[0,0],"arg_names":["self","user_context"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService",{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_calculate_data_completeness of EnterpriseGenerativeChatService","ret_type":"builtins.float","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_calculate_personalization_level":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","user_context"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._calculate_personalization_level","name":"_calculate_personalization_level","type":{".class":"CallableType","arg_kinds":[0,0],"arg_names":["self","user_context"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService",{".class":"UnionType","items":[{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_calculate_personalization_level of EnterpriseGenerativeChatService","ret_type":"builtins.str","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_consult_expert_bot":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["self","user_message","user_context"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._consult_expert_bot","name":"_consult_expert_bot","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["self","user_message","user_context"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService","builtins.str",{".class":"UnionType","items":[{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_consult_expert_bot of EnterpriseGenerativeChatService","ret_type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_detect_conversation_type":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["self","user_message","user_context"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._detect_conversation_type","name":"_detect_conversation_type","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["self","user_message","user_context"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService","builtins.str",{".class":"UnionType","items":[{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_detect_conversation_type of EnterpriseGenerativeChatService","ret_type":"builtins.str","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_format_market_prices_for_chat":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","market_data"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._format_market_prices_for_chat","name":"_format_market_prices_for_chat","type":{".class":"CallableType","arg_kinds":[0,0],"arg_names":["self","market_data"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService",{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_format_market_prices_for_chat of EnterpriseGenerativeChatService","ret_type":"builtins.str","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_get_current_market_prices":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["self"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._get_current_market_prices","name":"_get_current_market_prices","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_get_current_market_prices of EnterpriseGenerativeChatService","ret_type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_get_time_based_greeting":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["self"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._get_time_based_greeting","name":"_get_time_based_greeting","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_get_time_based_greeting of EnterpriseGenerativeChatService","ret_type":"builtins.str","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_initialize_bigquery_client":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["self"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._initialize_bigquery_client","name":"_initialize_bigquery_client","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_initialize_bigquery_client of EnterpriseGenerativeChatService","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_initialize_gemini_model":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["self"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._initialize_gemini_model","name":"_initialize_gemini_model","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_initialize_gemini_model of EnterpriseGenerativeChatService","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_integrate_expert_response":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["self","enhanced_message","expert_response"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._integrate_expert_response","name":"_integrate_expert_response","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["self","enhanced_message","expert_response"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService","builtins.str",{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_integrate_expert_response of EnterpriseGenerativeChatService","ret_type":"builtins.str","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_log_enterprise_interaction":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,0,0,0,0],"arg_names":["self","user_message","response","user_context","sentiment_analysis","response_analysis","response_time"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._log_enterprise_interaction","name":"_log_enterprise_interaction","type":{".class":"CallableType","arg_kinds":[0,0,0,0,0,0,0],"arg_names":["self","user_message","response","user_context","sentiment_analysis","response_analysis","response_time"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService","builtins.str","builtins.str",{".class":"UnionType","items":[{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"NoneType"}],"uses_pep604_syntax":false},{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},"builtins.float"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_log_enterprise_interaction of EnterpriseGenerativeChatService","ret_type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_log_to_bigquery":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","interaction_data"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._log_to_bigquery","name":"_log_to_bigquery","type":{".class":"CallableType","arg_kinds":[0,0],"arg_names":["self","interaction_data"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService",{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_log_to_bigquery of EnterpriseGenerativeChatService","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_make_response_natural":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","response_text"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._make_response_natural","name":"_make_response_natural","type":{".class":"CallableType","arg_kinds":[0,0],"arg_names":["self","response_text"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService","builtins.str"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_make_response_natural of EnterpriseGenerativeChatService","ret_type":"builtins.str","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_serialize_chat_history":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","history"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._serialize_chat_history","name":"_serialize_chat_history","type":{".class":"CallableType","arg_kinds":[0,0],"arg_names":["self","history"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService",{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.list"}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_serialize_chat_history of EnterpriseGenerativeChatService","ret_type":{".class":"Instance","args":[{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"extra_attrs":null,"type_ref":"builtins.list"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_should_consult_expert_bot":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["self","user_message","user_context"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._should_consult_expert_bot","name":"_should_consult_expert_bot","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["self","user_message","user_context"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService","builtins.str",{".class":"UnionType","items":[{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_should_consult_expert_bot of EnterpriseGenerativeChatService","ret_type":"builtins.bool","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_should_consult_market_prices":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["self","user_message","user_context"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._should_consult_market_prices","name":"_should_consult_market_prices","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["self","user_message","user_context"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService","builtins.str",{".class":"UnionType","items":[{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_should_consult_market_prices of EnterpriseGenerativeChatService","ret_type":"builtins.bool","type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_update_learning_patterns":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["self","user_context","interaction_data"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService._update_learning_patterns","name":"_update_learning_patterns","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["self","user_context","interaction_data"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService",{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"_update_learning_patterns of EnterpriseGenerativeChatService","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"bigquery_client":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["explicit_self_type","is_ready","is_inferred"],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.bigquery_client","name":"bigquery_client","type":{".class":"UnionType","items":[{".class":"AnyType","missing_import_name":"app.services.generative_chat_service.bigquery","source_any":null,"type_of_any":3},{".class":"NoneType"}],"uses_pep604_syntax":false}}},"bq_dataset_id":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["explicit_self_type","is_ready","is_inferred"],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.bq_dataset_id","name":"bq_dataset_id","type":{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"enterprise_auth":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["explicit_self_type","is_ready","is_inferred"],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.enterprise_auth","name":"enterprise_auth","type":"smarwatt_auth.auth.EnterpriseAuth"}},"get_enterprise_metrics":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["self"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.get_enterprise_metrics","name":"get_enterprise_metrics","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"get_enterprise_metrics of EnterpriseGenerativeChatService","ret_type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"interaction_log_table":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["explicit_self_type","is_ready","is_inferred"],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.interaction_log_table","name":"interaction_log_table","type":{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"learning_table":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["explicit_self_type","is_ready","is_inferred"],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.learning_table","name":"learning_table","type":{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"links_service":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.links_service","name":"links_service","type":"app.services.enterprise_links_service.EnterpriseLinkService"}},"model":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["explicit_self_type","is_ready","is_inferred"],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.model","name":"model","type":{".class":"UnionType","items":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2},{".class":"NoneType"}],"uses_pep604_syntax":false}}},"project_id":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["explicit_self_type","is_ready","is_inferred"],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.project_id","name":"project_id","type":{".class":"UnionType","items":["builtins.str",{".class":"NoneType"}],"uses_pep604_syntax":false}}},"send_message":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0,1],"arg_names":["self","chat_session","user_message","user_context"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.send_message","name":"send_message","type":{".class":"CallableType","arg_kinds":[0,0,0,1],"arg_names":["self","chat_session","user_message","user_context"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2},"builtins.str",{".class":"UnionType","items":[{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},{".class":"NoneType"}],"uses_pep604_syntax":false}],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"send_message of EnterpriseGenerativeChatService","ret_type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"start_new_chat":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0],"arg_names":["self"],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.start_new_chat","name":"start_new_chat","type":{".class":"CallableType","arg_kinds":[0],"arg_names":["self"],"arg_types":["app.services.generative_chat_service.EnterpriseGenerativeChatService"],"bound_args":[],"def_extras":{"first_arg":"self"},"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_ellipsis_args":false,"name":"start_new_chat of EnterpriseGenerativeChatService","ret_type":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"system_instruction":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_inferred"],"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.system_instruction","name":"system_instruction","type":"builtins.str"}}},"self_type":{".class":"TypeVarType","default":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4},"fullname":"app.services.generative_chat_service.EnterpriseGenerativeChatService.Self","id":0,"name":"Self","namespace":"","upper_bound":"app.services.generative_chat_service.EnterpriseGenerativeChatService","values":[],"variance":0},"slots":null,"tuple_type":null,"type_vars":[],"typeddict_type":null}},"GenerativeChatService":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"TypeAlias","alias_tvars":[],"column":0,"fullname":"app.services.generative_chat_service.GenerativeChatService","line":1738,"no_args":true,"normalized":false,"python_3_12_type_alias":false,"target":"app.services.generative_chat_service.EnterpriseGenerativeChatService"}},"List":{".class":"SymbolTableNode","cross_ref":"typing.List","kind":"Gdef","module_hidden":true,"module_public":false},"Optional":{".class":"SymbolTableNode","cross_ref":"typing.Optional","kind":"Gdef","module_hidden":true,"module_public":false},"__annotations__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"app.services.generative_chat_service.__annotations__","name":"__annotations__","type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6}],"extra_attrs":null,"type_ref":"builtins.dict"}}},"__doc__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"app.services.generative_chat_service.__doc__","name":"__doc__","type":"builtins.str"}},"__file__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"app.services.generative_chat_service.__file__","name":"__file__","type":"builtins.str"}},"__name__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"app.services.generative_chat_service.__name__","name":"__name__","type":"builtins.str"}},"__package__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"app.services.generative_chat_service.__package__","name":"__package__","type":"builtins.str"}},"__spec__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"app.services.generative_chat_service.__spec__","name":"__spec__","type":"_frozen_importlib.ModuleSpec"}},"_enterprise_chat_service_instance":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"app.services.generative_chat_service._enterprise_chat_service_instance","name":"_enterprise_chat_service_instance","type":{".class":"NoneType"}}},"bigquery":{".class":"SymbolTableNode","kind":"Gdef","module_hidden":true,"module_public":false,"node":{".class":"Var","flags":["is_suppressed_import","is_ready","is_inferred"],"fullname":"app.services.generative_chat_service.bigquery","name":"bigquery","type":{".class":"AnyType","missing_import_name":"app.services.generative_chat_service.bigquery","source_any":null,"type_of_any":3}}},"current_app":{".class":"SymbolTableNode","kind":"Gdef","module_hidden":true,"module_public":false,"node":{".class":"Var","flags":["is_suppressed_import","is_ready","is_inferred"],"fullname":"app.services.generative_chat_service.current_app","name":"current_app","type":{".class":"AnyType","missing_import_name":"app.services.generative_chat_service.current_app","source_any":null,"type_of_any":3}}},"datetime":{".class":"SymbolTableNode","cross_ref":"datetime.datetime","kind":"Gdef","module_hidden":true,"module_public":false},"genai":{".class":"SymbolTableNode","kind":"Gdef","module_hidden":true,"module_public":false,"node":{".class":"Var","flags":["is_suppressed_import","is_ready","is_inferred"],"fullname":"app.services.generative_chat_service.genai","name":"genai","type":{".class":"AnyType","missing_import_name":"app.services.generative_chat_service.genai","source_any":null,"type_of_any":3}}},"get_enterprise_chat_service":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[],"arg_names":[],"dataclass_transform_spec":null,"deprecated":null,"flags":[],"fullname":"app.services.generative_chat_service.get_enterprise_chat_service","name":"get_enterprise_chat_service","type":null}},"get_enterprise_link_service":{".class":"SymbolTableNode","cross_ref":"app.services.enterprise_links_service.get_enterprise_link_service","kind":"Gdef","module_hidden":true,"module_public":false},"json":{".class":"SymbolTableNode","cross_ref":"json","kind":"Gdef","module_hidden":true,"module_public":false},"logger":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_inferred","has_explicit_value"],"fullname":"app.services.generative_chat_service.logger","name":"logger","type":"logging.Logger"}},"logging":{".class":"SymbolTableNode","cross_ref":"logging","kind":"Gdef","module_hidden":true,"module_public":false},"now_spanish_iso":{".class":"SymbolTableNode","cross_ref":"utils.timezone_utils.now_spanish_iso","kind":"Gdef","module_hidden":true,"module_public":false},"request":{".class":"SymbolTableNode","kind":"Gdef","module_hidden":true,"module_public":false,"node":{".class":"Var","flags":["is_suppressed_import","is_ready","is_inferred"],"fullname":"app.services.generative_chat_service.request","name":"request","type":{".class":"AnyType","missing_import_name":"app.services.generative_chat_service.request","source_any":null,"type_of_any":3}}},"requests":{".class":"SymbolTableNode","kind":"Gdef","module_hidden":true,"module_public":false,"node":{".class":"Var","flags":["is_suppressed_import","is_ready","is_inferred"],"fullname":"app.services.generative_chat_service.requests","name":"requests","type":{".class":"AnyType","missing_import_name":"app.services.generative_chat_service.requests","source_any":null,"type_of_any":3}}},"time":{".class":"SymbolTableNode","cross_ref":"time","kind":"Gdef","module_hidden":true,"module_public":false},"uuid":{".class":"SymbolTableNode","cross_ref":"uuid","kind":"Gdef","module_hidden":true,"module_public":false}},"path":"C:\\Smarwatt_2\\SmarWatt_2\\backend\\sevicio chatbot\\servicios\\energy_ia_api_COPY\\app\\services\\generative_chat_service.py"}