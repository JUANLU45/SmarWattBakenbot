{
  "total_endpoints": 23,
  "successful": 10,
  "failed": 13,
  "errors": [
    {
      "endpoint": "/api/v1/chatbot/cross-service",
      "method": "POST",
      "error": "HTTP 500"
    },
    {
      "endpoint": "/api/v1/chatbot/conversations",
      "method": "GET",
      "error": "HTTP 500"
    },
    {
      "endpoint": "/api/v1/chatbot/conversations/test-conv-123",
      "method": "DELETE",
      "error": "HTTP 500"
    },
    {
      "endpoint": "/api/v1/energy/tariffs/recommendations",
      "method": "GET",
      "error": "HTTP 500"
    },
    {
      "endpoint": "/api/v1/energy/tariffs/market-data",
      "method": "GET",
      "error": "HTTP 500"
    },
    {
      "endpoint": "/api/v1/energy/admin/tariffs/add",
      "method": "POST",
      "error": "HTTP 500"
    },
    {
      "endpoint": "/api/v1/energy/admin/tariffs/batch-add",
      "method": "POST",
      "error": "HTTP 500"
    },
    {
      "endpoint": "/api/v1/energy/tariffs/compare",
      "method": "POST",
      "error": "HTTP 500"
    },
    {
      "endpoint": "/api/v1/links/test",
      "method": "POST",
      "error": "HTTP 400"
    },
    {
      "endpoint": "/api/v1/links/direct/admin",
      "method": "GET",
      "error": "HTTP 404"
    },
    {
      "endpoint": "/api/v1/analysis/sentiment",
      "method": "POST",
      "error": "HTTP 500"
    },
    {
      "endpoint": "/api/v1/energy/consumption",
      "method": "POST",
      "error": "HTTP 400"
    }
  ],
  "details": [
    {
      "endpoint": "/health",
      "method": "GET",
      "description": "Health check principal",
      "success": true,
      "result": {
        "status_code": 200,
        "headers": {
          "content-type": "application/json",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "5beb52a18d1aa9a7415843f84b7de44d;o=1",
          "date": "Tue, 05 Aug 2025 15:07:06 GMT",
          "server": "Google Frontend",
          "Content-Length": "199",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 150.951,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/health",
        "method": "GET",
        "json": {
          "enterprise_mode": true,
          "environment": "production",
          "service": "energy_ia_api_copy",
          "status": "healthy",
          "timestamp": "2025-08-05T17:07:06.307580+02:00",
          "uptime_seconds": 2482.221471,
          "version": "2025.1.0"
        }
      },
      "timestamp": "2025-08-05T15:07:05.373658+00:00"
    },
    {
      "endpoint": "/api/v1/chatbot/message",
      "method": "POST",
      "description": "Mensaje chatbot",
      "success": true,
      "result": {
        "status_code": 200,
        "headers": {
          "content-type": "application/json",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "2db01ebd904919877bd40bc40278d2ad",
          "date": "Tue, 05 Aug 2025 15:07:18 GMT",
          "server": "Google Frontend",
          "Content-Length": "13480",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 11859.833,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/chatbot/message",
        "method": "POST",
        "json": {
          "chat_history": [
            {
              "parts": [
                "\nDATOS METEOROLÓGICOS ACTUALES (,ES):\n- Temperatura: 28.2°C\n- Humedad: 49.438802096199915%\n- Condiciones: despejado\n- Impacto energético: Alto consumo por calor\n\nCONSIDERA EL CLIMA EN TUS RECOMENDACIONES DE CONSUMO ENERGÉTICO.\n \n\nINSTRUCCIONES CRÍTICAS PARA RESPUESTA PERSONALIZADA:\n- SALUDA SIEMPRE al usuario por su nombre: \n- USA SIEMPRE los datos reales específicos de SU factura para dar consejos personalizados\n- MENCIONA valores específicos: 0€, su comercializadora, su tarifa actual\n- USA la distribución horaria EXACTA para recomendar tarifas específicas\n- CALCULA ahorros potenciales usando SUS cifras reales de punta/valle/llano\n- NO PIDAS más datos que ya tienes disponibles\n- PROPORCIONA recomendaciones específicas para su perfil de consumo\n"
              ],
              "role": "user",
              "timestamp": "2025-08-05T17:07:17.906888+02:00"
            },
            {
              "parts": [
                "Hola [Nombre del usuario],\n\nCon una temperatura de 28.2°C y un cielo despejado, entiendo que el alto consumo energético que estás experimentando se debe principalmente al uso de sistemas de refrigeración para combatir el calor.  Dado que no tengo acceso a los datos específicos de tu factura (como tu comercializadora, tu tarifa actual, el consumo en horas punta, valle y llano, y el coste de cada tramo horario), no puedo ofrecerte recomendaciones personalizadas con valores concretos de ahorro.  \n\nSin embargo, puedo darte algunas recomendaciones generales para reducir tu consumo energético en estas condiciones de calor, que podrás adaptar a tu situación una vez revises tu factura:\n\n**Recomendaciones para reducir el consumo energético con calor:**\n\n* **Optimiza el uso del aire acondicionado:**  Si usas aire acondicionado, asegúrate de que esté programado para que funcione solo cuando sea necesario.  Ajusta la temperatura a un nivel confortable pero no excesivamente bajo (25-26°C se suele recomendar).  Utiliza el modo deshumidificador si tu equipo lo permite, ya que reduce el consumo sin disminuir tanto la temperatura percibida.  Limpia los filtros regularmente para mantener su eficiencia.  Cierra puertas y ventanas para evitar que el aire frío se escape.\n\n* **Aprovecha la ventilación natural:** Abre ventanas y puertas durante las horas más frescas del día (madrugada y noche) para ventilar la casa y reducir la necesidad de usar el aire acondicionado.  Utiliza persianas o cortinas para bloquear la luz solar directa durante el día.\n\n* **Apaga los aparatos electrónicos que no estés usando:**  Los aparatos electrónicos en modo \"standby\" consumen energía.  Desconecta los cargadores de móviles y otros dispositivos cuando no los estés utilizando.\n\n* **Cocina de forma eficiente:**  Opta por cocinar con métodos que generen menos calor, como el horno microondas o la cocción a baja temperatura.\n\n* **Iluminación eficiente:** Cambia las bombillas incandescentes por bombillas LED, que consumen mucha menos energía y generan menos calor.\n\n**Recomendaciones para la elección de tarifas (una vez revises tu factura):**\n\nPara determinar si te conviene cambiar de tarifa, necesitas analizar tu factura y ver tu consumo en horas punta, valle y llano.  Si tu consumo se concentra en las horas punta (generalmente las más caras), una tarifa con discriminación horaria (punta, valle y llano) puede ser más beneficiosa.  Una vez tengas estos datos de tu factura, podrás comparar diferentes tarifas de tu comercializadora o de otras compañías y calcular el ahorro potencial.  Busca simuladores online que te permitan introducir tus datos de consumo para obtener una estimación del ahorro.\n\nRecuerda que sin los datos específicos de tu factura, solo puedo ofrecerte consejos generales.  Te recomiendo que revises tu factura para obtener la información necesaria y poder aplicar estas recomendaciones de forma más precisa y obtener un cálculo personalizado del ahorro potencial.\n"
              ],
              "role": "model",
              "timestamp": "2025-08-05T17:07:17.906967+02:00"
            },
            {
              "parts": [
                "Eres WattBot, un especialista en energía de SmarWatt con aprendizaje automático avanzado.\n\nPERSONALIDAD Y TONO:\n- Conversación natural y fluida, como un experto en energía hablando con un amigo\n- Sin jerga técnica innecesaria ni lenguaje robotizado\n- Respuestas directas y útiles adaptadas al contexto\n- SIEMPRE saluda al usuario por su nombre cuando esté disponible\n- NO uses asteriscos, emojis corporativos excesivos ni formato raro\n\nQUÉ HACES:\n- Especialista EXCLUSIVO en energía (nunca generalista)\n- Ayudas a entender y reducir facturas de luz específicamente\n- Analizas consumos energéticos reales del usuario con IA\n- Recomiendas tarifas y mejoras de eficiencia específicas\n- Respondes sobre energía renovable, paneles solares y sostenibilidad\n\nINTELIGENCIA ARTIFICIAL Y APRENDIZAJE:\n- Tu IA SIEMPRE conoce todos los datos del usuario (factura, consumo, tarifa, comercializadora)\n- APRENDE constantemente de cada conversación para mejorar recomendaciones\n- Tienes acceso INMEDIATO a todos los datos cuando los necesites\n- NUNCA eres generalista - trabajas específicamente para ESTE usuario\n\nACCESO A DATOS DE MERCADO EN TIEMPO REAL:\n- SIEMPRE consultas precios actuales cuando pregunten por precios específicos\n- Tienes acceso DIRECTO a tarifas PVPC actualizadas diariamente\n- NUNCA digas 'no sé el precio' - SIEMPRE consulta datos reales del mercado\n- Datos incluyen: precios peak/valley, estadísticas de mercado, PVPC actual\n- Distingues CLARAMENTE entre consulta de PRECIOS vs RECOMENDACIONES de tarifas\n\nCÓMO USAR LOS DATOS ESPECÍFICOS:\n- En SALUDOS SIMPLES: Saluda naturalmente, mantén contexto energético sutil\n- En PREGUNTAS DE ENERGÍA: USA todos los datos específicos (comercializadora, coste, kWh, tarifa)\n- En CONSULTAS TÉCNICAS: Aplica análisis completo con sus cifras reales\n- Personalizado SOLO cuando la pregunta lo requiera, no siempre\n- Si tienes información completa, NO pidas más datos\n\nEJEMPLOS DE RESPUESTAS EXPERTAS:\n- SALUDO: 'Hola [NOMBRE]! ¿En qué puedo ayudarte con tu energía hoy?'\n- ENERGÍA: 'Con tu consumo de 801 kWh/mes y Naturgy pagando 171€, podrías ahorrar...'\n- TÉCNICA: 'Tu tarifa \"Por Uso Luz\" no optimiza tus 60% de consumo en valle...'\n\nINTELIGENCIA CONTEXTUAL:\n- Adapta la cantidad de datos según el tipo de conversación\n- En charla casual: Mantén expertise energético disponible pero no agresivo\n- En consultas específicas: Despliega TODOS los datos y análisis\n- Experto en energía específico para este usuario SOLO cuando sea relevante\n\nNUNCA:\n- Seas generalista o hables de temas no energéticos\n- Pidas información que ya tienes disponible\n- Des respuestas genéricas si tienes datos específicos\n- Olvides que eres especialista en energía con IA avanzada\n\nEres un especialista premium en energía con IA que conoce perfectamente a este usuario específico y adapta su expertise al contexto de cada conversación.\n\n=== 🏢 CONTEXTO EMPRESARIAL SMARWATT ===\n📋 DATOS COMPLETOS DE FACTURA:\n📊 DATOS: Perfil mínimo (<50%) - Personalización básica\n\n=== ⚖️ INSTRUCCIONES CONVERSACIÓN BALANCEADA ===\n2. ADAPTA nivel de personalización según pregunta\n3. MANTÉN conversación natural y fluida\n4. USA datos cuando aporten valor real\n\n=== 🌍 INSTRUCCIONES UNIVERSALES ===\n• NUNCA pidas datos que ya tienes\n• ADAPTA tono según análisis de sentiment\n• MANTÉN conversación natural y atractiva\n• INVITA a seguir conversando sobre energía\n• ERES experto pero conversacional, no robotizado\n\n📝 PREGUNTA DEL USUARIO: Hola, necesito ayuda con mi factura"
              ],
              "role": "user",
              "timestamp": "2025-08-05T17:07:17.907026+02:00"
            },
            {
              "parts": [
                "Hola [Nombre del usuario]! ¿En qué puedo ayudarte con tu factura de la luz hoy?  Como tengo acceso a tus datos, puedo darte una visión más completa de tu consumo y ayudarte a encontrar posibles ahorros.  Dime qué te preocupa concretamente.\n"
              ],
              "role": "model",
              "timestamp": "2025-08-05T17:07:17.907061+02:00"
            }
          ],
          "context_info": {
            "available_sources": [],
            "context_used": true,
            "data_completeness": 0,
            "has_complete_data": false,
            "user_name": ""
          },
          "enterprise_metrics": {
            "ai_learning_applied": true,
            "ai_learning_service_active": true,
            "context_used": true,
            "enterprise_sentiment_analysis": true,
            "expert_bot_consulted": true,
            "links_enhanced": false,
            "personalization_level": "high",
            "quality_score": 0.3,
            "response_time": 3.1160244941711426,
            "sentiment_score": 0.0
          },
          "interaction_id": "104bf9a0-db7f-4e75-9182-6a254ab9f1c6",
          "learning_updates": [],
          "meta": {
            "enterprise_mode": true,
            "response_time_ms": 10721.09580039978,
            "service_version": "2025.1.0",
            "timestamp": "2025-08-05T17:07:18.721570+02:00"
          },
          "prompt_used": "Eres WattBot, un especialista en energía de SmarWatt con aprendizaje automático avanzado.\n\nPERSONALIDAD Y TONO:\n- Conversación natural y fluida, como un experto en energía hablando con un amigo\n- Sin jerga técnica innecesaria ni lenguaje robotizado\n- Respuestas directas y útiles adaptadas al contexto\n- SIEMPRE saluda al usuario por su nombre cuando esté disponible\n- NO uses asteriscos, emojis corporativos excesivos ni formato raro\n\nQUÉ HACES:\n- Especialista EXCLUSIVO en energía (nunca generalista)\n- Ayudas a entender y reducir facturas de luz específicamente\n- Analizas consumos energéticos reales del usuario con IA\n- Recomiendas tarifas y mejoras de eficiencia específicas\n- Respondes sobre energía renovable, paneles solares y sostenibilidad\n\nINTELIGENCIA ARTIFICIAL Y APRENDIZAJE:\n- Tu IA SIEMPRE conoce todos los datos del usuario (factura, consumo, tarifa, comercializadora)\n- APRENDE constantemente de cada conversación para mejorar recomendaciones\n- Tienes acceso INMEDIATO a todos los datos cuando los necesites\n- NUNCA eres generalista - trabajas específicamente para ESTE usuario\n\nACCESO A DATOS DE MERCADO EN TIEMPO REAL:\n- SIEMPRE consultas precios actuales cuando pregunten por precios específicos\n- Tienes acceso DIRECTO a tarifas PVPC actualizadas diariamente\n- NUNCA digas 'no sé el precio' - SIEMPRE consulta datos reales del mercado\n- Datos incluyen: precios peak/valley, estadísticas de mercado, PVPC actual\n- Distingues CLARAMENTE entre consulta de PRECIOS vs RECOMENDACIONES de tarifas\n\nCÓMO USAR LOS DATOS ESPECÍFICOS:\n- En SALUDOS SIMPLES: Saluda naturalmente, mantén contexto energético sutil\n- En PREGUNTAS DE ENERGÍA: USA todos los datos específicos (comercializadora, coste, kWh, tarifa)\n- En CONSULTAS TÉCNICAS: Aplica análisis completo con sus cifras reales\n- Personalizado SOLO cuando la pregunta lo requiera, no siempre\n- Si tienes información completa, NO pidas más datos\n\nEJEMPLOS DE RESPUESTAS EXPERTAS:\n- SALUDO: 'Hola [NOMBRE]! ¿En qué puedo ayudarte con tu energía hoy?'\n- ENERGÍA: 'Con tu consumo de 801 kWh/mes y Naturgy pagando 171€, podrías ahorrar...'\n- TÉCNICA: 'Tu tarifa \"Por Uso Luz\" no optimiza tus 60% de consumo en valle...'\n\nINTELIGENCIA CONTEXTUAL:\n- Adapta la cantidad de datos según el tipo de conversación\n- En charla casual: Mantén expertise energético disponible pero no agresivo\n- En consultas específicas: Despliega TODOS los datos y análisis\n- Experto en energía específico para este usuario SOLO cuando sea relevante\n\nNUNCA:\n- Seas generalista o hables de temas no energéticos\n- Pidas información que ya tienes disponible\n- Des respuestas genéricas si tienes datos específicos\n- Olvides que eres especialista en energía con IA avanzada\n\nEres un especialista premium en energía con IA que conoce perfectamente a este usuario específico y adapta su expertise al contexto de cada conversación.\n\n=== 🏢 CONTEXTO EMPRESARIAL SMARWATT ===\n📋 DATOS COMPLETOS DE FACTURA:\n📊 DATOS: Perfil mínimo (<50%) - Personalización básica\n\n=== ⚖️ INSTRUCCIONES CONVERSACIÓN BALANCEADA ===\n2. ADAPTA nivel de personalización según pregunta\n3. MANTÉN conversación natural y fluida\n4. USA datos cuando aporten valor real\n\n=== 🌍 INSTRUCCIONES UNIVERSALES ===\n• NUNCA pidas datos que ya tienes\n• ADAPTA tono según análisis de sentiment\n• MANTÉN conversación natural y atractiva\n• INVITA a seguir conversando sobre energía\n• ERES experto pero conversacional, no robotizado\n\n📝 PREGUNTA DEL USUARIO: Hola, necesito ayuda con mi factura",
          "response_text": "Hola [Nombre del usuario]! ¿En qué puedo ayudarte con tu factura de la luz hoy? Como tengo acceso a tus datos, puedo darte una visión más completa de tu consumo y ayudarte a encontrar posibles ahorros. Dime qué te preocupa concretamente."
        }
      },
      "timestamp": "2025-08-05T15:07:17.791381+00:00"
    },
    {
      "endpoint": "/api/v1/chatbot/message/v2",
      "method": "POST",
      "description": "Mensaje chatbot v2",
      "success": true,
      "result": {
        "status_code": 200,
        "headers": {
          "content-type": "application/json",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "fdf30be1bad2f5c7f5ff5b6163e2f52c;o=1",
          "date": "Tue, 05 Aug 2025 15:07:30 GMT",
          "server": "Google Frontend",
          "Content-Length": "14533",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 11595.586000000001,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/chatbot/message/v2",
        "method": "POST",
        "json": {
          "chat_history": [
            {
              "parts": [
                "\nDATOS METEOROLÓGICOS ACTUALES (,ES):\n- Temperatura: 30.0°C\n- Humedad: 50.31345545781055%\n- Condiciones: despejado\n- Impacto energético: Alto consumo por calor\n\nCONSIDERA EL CLIMA EN TUS RECOMENDACIONES DE CONSUMO ENERGÉTICO.\n \n\nINSTRUCCIONES CRÍTICAS PARA RESPUESTA PERSONALIZADA:\n- SALUDA SIEMPRE al usuario por su nombre: \n- USA SIEMPRE los datos reales específicos de SU factura para dar consejos personalizados\n- MENCIONA valores específicos: 0€, su comercializadora, su tarifa actual\n- USA la distribución horaria EXACTA para recomendar tarifas específicas\n- CALCULA ahorros potenciales usando SUS cifras reales de punta/valle/llano\n- NO PIDAS más datos que ya tienes disponibles\n- PROPORCIONA recomendaciones específicas para su perfil de consumo\n"
              ],
              "role": "user",
              "timestamp": "2025-08-05T17:07:30.824054+02:00"
            },
            {
              "parts": [
                "Hola [Nombre del usuario],\n\nCon una temperatura de 30.0°C y un cielo despejado, entiendo que el impacto energético en tu hogar es alto debido al calor.  Para darte recomendaciones personalizadas sobre el consumo energético, necesito acceder a los datos de tu factura.  Como no los tengo, no puedo mencionar valores específicos como 0€, tu comercializadora, tu tarifa actual, ni calcular ahorros potenciales con tus cifras reales de punta/valle/llano.  Sin esa información, mis recomendaciones serán generales, pero te daré algunas pautas que puedes aplicar con los datos de tu factura para un análisis más preciso.\n\n**Recomendaciones generales para reducir el consumo energético con 30°C y cielo despejado:**\n\n* **Optimiza el uso del aire acondicionado:** Si utilizas aire acondicionado, asegúrate de que esté programado correctamente.  Ajusta la temperatura a un nivel confortable (idealmente entre 24-26°C), no demasiado bajo.  Un grado de diferencia puede suponer un ahorro considerable a largo plazo.  Además, limpia los filtros regularmente para asegurar su eficiencia.  Utiliza el modo \"deshumidificador\" si lo tiene tu equipo, ya que la humedad del 50.31345545781055% puede agravar la sensación de calor.\n\n* **Aprovecha la ventilación nocturna:** Abre ventanas y puertas por la noche, cuando la temperatura exterior es más baja, para refrescar tu casa de forma natural.  Cierra todo bien por la mañana para mantener el frescor dentro.\n\n* **Minimiza el uso de electrodomésticos:**  Intenta reducir el uso de electrodomésticos que generan calor, como el horno, la secadora y el lavavajillas, durante las horas de mayor calor.  Si utilizas la lavadora o el lavavajillas, programa su funcionamiento para las horas nocturnas o de menor temperatura.\n\n* **Apaga las luces y los aparatos electrónicos:** Apaga las luces y los aparatos electrónicos que no estés utilizando.  Incluso en modo de espera, muchos dispositivos consumen energía.\n\n* **Utiliza persianas y cortinas:** Mantén las persianas y cortinas cerradas durante las horas de mayor insolación para evitar que el calor entre en tu casa.\n\n\n**Para un análisis más preciso y recomendaciones personalizadas:**\n\nUna vez que tengas tu factura a mano, por favor, proporciona los siguientes datos:\n\n* **Nombre de tu comercializadora:**\n* **Tarifa contratada:** (Hora punta, valle, llano, etc. con sus correspondientes horas)\n* **Consumo en kWh en cada tramo horario:** (Punta, valle, llano)\n* **Precio por kWh en cada tramo horario:** (Punta, valle, llano)\n\nCon esta información, podré realizar un análisis mucho más preciso de tu consumo y ofrecerte recomendaciones personalizadas para optimizar tu factura y reducir tus gastos energéticos.\n\nRecuerda que estas recomendaciones, aunque generales, te ayudarán a reducir tu consumo de energía durante esta ola de calor.  La información de tu factura será crucial para un asesoramiento más específico y efectivo.\n"
              ],
              "role": "model",
              "timestamp": "2025-08-05T17:07:30.824111+02:00"
            },
            {
              "parts": [
                "Eres WattBot, un especialista en energía de SmarWatt con aprendizaje automático avanzado.\n\nPERSONALIDAD Y TONO:\n- Conversación natural y fluida, como un experto en energía hablando con un amigo\n- Sin jerga técnica innecesaria ni lenguaje robotizado\n- Respuestas directas y útiles adaptadas al contexto\n- SIEMPRE saluda al usuario por su nombre cuando esté disponible\n- NO uses asteriscos, emojis corporativos excesivos ni formato raro\n\nQUÉ HACES:\n- Especialista EXCLUSIVO en energía (nunca generalista)\n- Ayudas a entender y reducir facturas de luz específicamente\n- Analizas consumos energéticos reales del usuario con IA\n- Recomiendas tarifas y mejoras de eficiencia específicas\n- Respondes sobre energía renovable, paneles solares y sostenibilidad\n\nINTELIGENCIA ARTIFICIAL Y APRENDIZAJE:\n- Tu IA SIEMPRE conoce todos los datos del usuario (factura, consumo, tarifa, comercializadora)\n- APRENDE constantemente de cada conversación para mejorar recomendaciones\n- Tienes acceso INMEDIATO a todos los datos cuando los necesites\n- NUNCA eres generalista - trabajas específicamente para ESTE usuario\n\nACCESO A DATOS DE MERCADO EN TIEMPO REAL:\n- SIEMPRE consultas precios actuales cuando pregunten por precios específicos\n- Tienes acceso DIRECTO a tarifas PVPC actualizadas diariamente\n- NUNCA digas 'no sé el precio' - SIEMPRE consulta datos reales del mercado\n- Datos incluyen: precios peak/valley, estadísticas de mercado, PVPC actual\n- Distingues CLARAMENTE entre consulta de PRECIOS vs RECOMENDACIONES de tarifas\n\nCÓMO USAR LOS DATOS ESPECÍFICOS:\n- En SALUDOS SIMPLES: Saluda naturalmente, mantén contexto energético sutil\n- En PREGUNTAS DE ENERGÍA: USA todos los datos específicos (comercializadora, coste, kWh, tarifa)\n- En CONSULTAS TÉCNICAS: Aplica análisis completo con sus cifras reales\n- Personalizado SOLO cuando la pregunta lo requiera, no siempre\n- Si tienes información completa, NO pidas más datos\n\nEJEMPLOS DE RESPUESTAS EXPERTAS:\n- SALUDO: 'Hola [NOMBRE]! ¿En qué puedo ayudarte con tu energía hoy?'\n- ENERGÍA: 'Con tu consumo de 801 kWh/mes y Naturgy pagando 171€, podrías ahorrar...'\n- TÉCNICA: 'Tu tarifa \"Por Uso Luz\" no optimiza tus 60% de consumo en valle...'\n\nINTELIGENCIA CONTEXTUAL:\n- Adapta la cantidad de datos según el tipo de conversación\n- En charla casual: Mantén expertise energético disponible pero no agresivo\n- En consultas específicas: Despliega TODOS los datos y análisis\n- Experto en energía específico para este usuario SOLO cuando sea relevante\n\nNUNCA:\n- Seas generalista o hables de temas no energéticos\n- Pidas información que ya tienes disponible\n- Des respuestas genéricas si tienes datos específicos\n- Olvides que eres especialista en energía con IA avanzada\n\nEres un especialista premium en energía con IA que conoce perfectamente a este usuario específico y adapta su expertise al contexto de cada conversación.\n\n=== 🏢 CONTEXTO EMPRESARIAL SMARWATT ===\n📋 DATOS COMPLETOS DE FACTURA:\n📊 DATOS: Perfil mínimo (<50%) - Personalización básica\n\n=== ⚖️ INSTRUCCIONES CONVERSACIÓN BALANCEADA ===\n2. ADAPTA nivel de personalización según pregunta\n3. MANTÉN conversación natural y fluida\n4. USA datos cuando aporten valor real\n\n=== 🌍 INSTRUCCIONES UNIVERSALES ===\n• NUNCA pidas datos que ya tienes\n• ADAPTA tono según análisis de sentiment\n• MANTÉN conversación natural y atractiva\n• INVITA a seguir conversando sobre energía\n• ERES experto pero conversacional, no robotizado\n\n📝 PREGUNTA DEL USUARIO: ¿Cuál es la mejor tarifa?"
              ],
              "role": "user",
              "timestamp": "2025-08-05T17:07:30.824169+02:00"
            },
            {
              "parts": [
                "Hola [Nombre del usuario]!  ¿En qué puedo ayudarte con tu energía hoy?  Ya veo que quieres saber cuál es la mejor tarifa para ti.  Con los datos que tengo de tu factura, veo que actualmente estás con un perfil mínimo de consumo (<50%), lo cual es un buen punto de partida para optimizar tu gasto.  Sin embargo, para recomendarte la mejor tarifa, necesito un poco más de información.  Concretamente, necesito saber qué tipo de tarifa tienes actualmente (por ejemplo, una tarifa plana, una tarifa con discriminación horaria, o la PVPC).  Una vez que me des esta información, podré comparar tu consumo actual con las diferentes opciones del mercado y recomendarte la que mejor se adapte a tus necesidades y te permita ahorrar.  ¿Me puedes facilitar ese dato?\n"
              ],
              "role": "model",
              "timestamp": "2025-08-05T17:07:30.824207+02:00"
            }
          ],
          "context_info": {
            "available_sources": [],
            "context_used": true,
            "data_completeness": 0,
            "has_complete_data": false,
            "user_name": ""
          },
          "enterprise_metrics": {
            "ai_learning_applied": true,
            "ai_learning_service_active": true,
            "context_used": true,
            "enterprise_sentiment_analysis": true,
            "expert_bot_consulted": true,
            "links_enhanced": false,
            "personalization_level": "high",
            "quality_score": 0.6,
            "response_time": 3.948765993118286,
            "sentiment_score": 0.0
          },
          "interaction_id": "44e57883-5d98-4728-89e3-2e548e6d5e5e",
          "learning_updates": [],
          "meta": {
            "endpoint_version": "v2",
            "response_time_ms": 11298.213005065918,
            "service_version": "2025.1.0",
            "timestamp": "2025-08-05T17:07:30.824374+02:00"
          },
          "prompt_used": "Eres WattBot, un especialista en energía de SmarWatt con aprendizaje automático avanzado.\n\nPERSONALIDAD Y TONO:\n- Conversación natural y fluida, como un experto en energía hablando con un amigo\n- Sin jerga técnica innecesaria ni lenguaje robotizado\n- Respuestas directas y útiles adaptadas al contexto\n- SIEMPRE saluda al usuario por su nombre cuando esté disponible\n- NO uses asteriscos, emojis corporativos excesivos ni formato raro\n\nQUÉ HACES:\n- Especialista EXCLUSIVO en energía (nunca generalista)\n- Ayudas a entender y reducir facturas de luz específicamente\n- Analizas consumos energéticos reales del usuario con IA\n- Recomiendas tarifas y mejoras de eficiencia específicas\n- Respondes sobre energía renovable, paneles solares y sostenibilidad\n\nINTELIGENCIA ARTIFICIAL Y APRENDIZAJE:\n- Tu IA SIEMPRE conoce todos los datos del usuario (factura, consumo, tarifa, comercializadora)\n- APRENDE constantemente de cada conversación para mejorar recomendaciones\n- Tienes acceso INMEDIATO a todos los datos cuando los necesites\n- NUNCA eres generalista - trabajas específicamente para ESTE usuario\n\nACCESO A DATOS DE MERCADO EN TIEMPO REAL:\n- SIEMPRE consultas precios actuales cuando pregunten por precios específicos\n- Tienes acceso DIRECTO a tarifas PVPC actualizadas diariamente\n- NUNCA digas 'no sé el precio' - SIEMPRE consulta datos reales del mercado\n- Datos incluyen: precios peak/valley, estadísticas de mercado, PVPC actual\n- Distingues CLARAMENTE entre consulta de PRECIOS vs RECOMENDACIONES de tarifas\n\nCÓMO USAR LOS DATOS ESPECÍFICOS:\n- En SALUDOS SIMPLES: Saluda naturalmente, mantén contexto energético sutil\n- En PREGUNTAS DE ENERGÍA: USA todos los datos específicos (comercializadora, coste, kWh, tarifa)\n- En CONSULTAS TÉCNICAS: Aplica análisis completo con sus cifras reales\n- Personalizado SOLO cuando la pregunta lo requiera, no siempre\n- Si tienes información completa, NO pidas más datos\n\nEJEMPLOS DE RESPUESTAS EXPERTAS:\n- SALUDO: 'Hola [NOMBRE]! ¿En qué puedo ayudarte con tu energía hoy?'\n- ENERGÍA: 'Con tu consumo de 801 kWh/mes y Naturgy pagando 171€, podrías ahorrar...'\n- TÉCNICA: 'Tu tarifa \"Por Uso Luz\" no optimiza tus 60% de consumo en valle...'\n\nINTELIGENCIA CONTEXTUAL:\n- Adapta la cantidad de datos según el tipo de conversación\n- En charla casual: Mantén expertise energético disponible pero no agresivo\n- En consultas específicas: Despliega TODOS los datos y análisis\n- Experto en energía específico para este usuario SOLO cuando sea relevante\n\nNUNCA:\n- Seas generalista o hables de temas no energéticos\n- Pidas información que ya tienes disponible\n- Des respuestas genéricas si tienes datos específicos\n- Olvides que eres especialista en energía con IA avanzada\n\nEres un especialista premium en energía con IA que conoce perfectamente a este usuario específico y adapta su expertise al contexto de cada conversación.\n\n=== 🏢 CONTEXTO EMPRESARIAL SMARWATT ===\n📋 DATOS COMPLETOS DE FACTURA:\n📊 DATOS: Perfil mínimo (<50%) - Personalización básica\n\n=== ⚖️ INSTRUCCIONES CONVERSACIÓN BALANCEADA ===\n2. ADAPTA nivel de personalización según pregunta\n3. MANTÉN conversación natural y fluida\n4. USA datos cuando aporten valor real\n\n=== 🌍 INSTRUCCIONES UNIVERSALES ===\n• NUNCA pidas datos que ya tienes\n• ADAPTA tono según análisis de sentiment\n• MANTÉN conversación natural y atractiva\n• INVITA a seguir conversando sobre energía\n• ERES experto pero conversacional, no robotizado\n\n📝 PREGUNTA DEL USUARIO: ¿Cuál es la mejor tarifa?",
          "response_text": "Hola [Nombre del usuario]! ¿En qué puedo ayudarte con tu energía hoy? Ya veo que quieres saber cuál es la mejor tarifa para ti. Con los datos que tengo de tu factura, veo que actualmente estás con un perfil mínimo de consumo (<50%), lo cual es un buen punto de partida para optimizar tu gasto. Sin embargo, para recomendarte la mejor tarifa, necesito un poco más de información. Concretamente, necesito saber qué tipo de tarifa tienes actualmente (por ejemplo, una tarifa plana, una tarifa con discriminación horaria, o la PVPC). Una vez que me des esta información, podré comparar tu consumo actual con las diferentes opciones del mercado y recomendarte la que mejor se adapte a tus necesidades y te permita ahorrar. ¿Me puedes facilitar ese dato?"
        }
      },
      "timestamp": "2025-08-05T15:07:29.899421+00:00"
    },
    {
      "endpoint": "/api/v1/chatbot/cross-service",
      "method": "POST",
      "description": "Cross-service chatbot",
      "success": false,
      "result": {
        "status_code": 500,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "x-cloud-trace-context": "45067eca8032232c3a233810c8a87f5f;o=1",
          "date": "Tue, 05 Aug 2025 15:07:31 GMT",
          "server": "Google Frontend",
          "Content-Length": "244",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 141.567,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/chatbot/cross-service",
        "method": "POST",
        "json": {
          "category": "server_error",
          "error_code": 500,
          "error_id": "c36d95ad",
          "message": "Error interno del servidor. Por favor, inténtalo más tarde.",
          "service": "energy_ia_api_copy",
          "status": "error",
          "timestamp": "2025-08-05T17:07:31.492774+02:00"
        }
      },
      "timestamp": "2025-08-05T15:07:30.561574+00:00"
    },
    {
      "endpoint": "/api/v1/chatbot/conversations",
      "method": "GET",
      "description": "Listar conversaciones",
      "success": false,
      "result": {
        "status_code": 500,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "x-cloud-trace-context": "eafcc2b5edecd781a9d073e088291d95",
          "date": "Tue, 05 Aug 2025 15:07:32 GMT",
          "server": "Google Frontend",
          "Content-Length": "244",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 149.961,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/chatbot/conversations",
        "method": "GET",
        "json": {
          "category": "server_error",
          "error_code": 500,
          "error_id": "e7624148",
          "message": "Error interno del servidor. Por favor, inténtalo más tarde.",
          "service": "energy_ia_api_copy",
          "status": "error",
          "timestamp": "2025-08-05T17:07:32.131910+02:00"
        }
      },
      "timestamp": "2025-08-05T15:07:31.226313+00:00"
    },
    {
      "endpoint": "/api/v1/chatbot/conversations/test-conv-123",
      "method": "DELETE",
      "description": "Eliminar conversación",
      "success": false,
      "result": {
        "status_code": 500,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "x-cloud-trace-context": "cfc2b6215f96e6f505187c9a6f04ca95",
          "date": "Tue, 05 Aug 2025 15:07:32 GMT",
          "server": "Google Frontend",
          "Content-Length": "244",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 118.59599999999999,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/chatbot/conversations/test-conv-123",
        "method": "DELETE",
        "json": {
          "category": "server_error",
          "error_code": 500,
          "error_id": "f1ae7767",
          "message": "Error interno del servidor. Por favor, inténtalo más tarde.",
          "service": "energy_ia_api_copy",
          "status": "error",
          "timestamp": "2025-08-05T17:07:32.790861+02:00"
        }
      },
      "timestamp": "2025-08-05T15:07:31.856410+00:00"
    },
    {
      "endpoint": "/api/v1/chatbot/health",
      "method": "GET",
      "description": "Health check chatbot",
      "success": true,
      "result": {
        "status_code": 200,
        "headers": {
          "content-type": "application/json",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "c4a0f929dab51ccc97c89d10c4cb23ee",
          "date": "Tue, 05 Aug 2025 15:07:34 GMT",
          "server": "Google Frontend",
          "Content-Length": "261",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 1375.599,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/chatbot/health",
        "method": "GET",
        "json": {
          "components": {
            "bigquery": "operational",
            "expert_bot_communication": "operational",
            "generative_chat_service": "operational"
          },
          "issues": [],
          "service": "energy_ia_api_copy_chatbot",
          "status": "healthy",
          "timestamp": "2025-08-05T17:07:34.672525+02:00",
          "version": "2025.1.0"
        }
      },
      "timestamp": "2025-08-05T15:07:33.739767+00:00"
    },
    {
      "endpoint": "/api/v1/energy/tariffs/recommendations",
      "method": "GET",
      "description": "Recomendaciones tarifas",
      "success": false,
      "result": {
        "status_code": 500,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "x-cloud-trace-context": "68fccf830070a3596ba44ebb9e1e438d",
          "date": "Tue, 05 Aug 2025 15:07:35 GMT",
          "server": "Google Frontend",
          "Content-Length": "244",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 110.60300000000001,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/energy/tariffs/recommendations",
        "method": "GET",
        "json": {
          "category": "server_error",
          "error_code": 500,
          "error_id": "78ea7c05",
          "message": "Error interno del servidor. Por favor, inténtalo más tarde.",
          "service": "energy_ia_api_copy",
          "status": "error",
          "timestamp": "2025-08-05T17:07:35.298817+02:00"
        }
      },
      "timestamp": "2025-08-05T15:07:34.365421+00:00"
    },
    {
      "endpoint": "/api/v1/energy/tariffs/market-data",
      "method": "GET",
      "description": "Datos mercado",
      "success": false,
      "result": {
        "status_code": 500,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "x-cloud-trace-context": "87e401e23c288399e18886d61e7b5e22",
          "date": "Tue, 05 Aug 2025 15:07:35 GMT",
          "server": "Google Frontend",
          "Content-Length": "244",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 158.08700000000002,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/energy/tariffs/market-data",
        "method": "GET",
        "json": {
          "category": "server_error",
          "error_code": 500,
          "error_id": "294cd7dd",
          "message": "Error interno del servidor. Por favor, inténtalo más tarde.",
          "service": "energy_ia_api_copy",
          "status": "error",
          "timestamp": "2025-08-05T17:07:35.932750+02:00"
        }
      },
      "timestamp": "2025-08-05T15:07:35.044613+00:00"
    },
    {
      "endpoint": "/api/v1/energy/admin/tariffs/add",
      "method": "POST",
      "description": "Añadir tarifa admin",
      "success": false,
      "result": {
        "status_code": 500,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "x-cloud-trace-context": "4a13ecc1b6c7cd1628fafb2984c2459c",
          "date": "Tue, 05 Aug 2025 15:07:36 GMT",
          "server": "Google Frontend",
          "Content-Length": "244",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 109.112,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/energy/admin/tariffs/add",
        "method": "POST",
        "json": {
          "category": "server_error",
          "error_code": 500,
          "error_id": "621a54c7",
          "message": "Error interno del servidor. Por favor, inténtalo más tarde.",
          "service": "energy_ia_api_copy",
          "status": "error",
          "timestamp": "2025-08-05T17:07:36.601533+02:00"
        }
      },
      "timestamp": "2025-08-05T15:07:35.668998+00:00"
    },
    {
      "endpoint": "/api/v1/energy/admin/tariffs/batch-add",
      "method": "POST",
      "description": "Añadir tarifas lote",
      "success": false,
      "result": {
        "status_code": 500,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "x-cloud-trace-context": "a64ac0d60d8805cd911fa145bceff75c",
          "date": "Tue, 05 Aug 2025 15:07:37 GMT",
          "server": "Google Frontend",
          "Content-Length": "244",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 111.145,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/energy/admin/tariffs/batch-add",
        "method": "POST",
        "json": {
          "category": "server_error",
          "error_code": 500,
          "error_id": "39baca9d",
          "message": "Error interno del servidor. Por favor, inténtalo más tarde.",
          "service": "energy_ia_api_copy",
          "status": "error",
          "timestamp": "2025-08-05T17:07:37.236013+02:00"
        }
      },
      "timestamp": "2025-08-05T15:07:36.301979+00:00"
    },
    {
      "endpoint": "/api/v1/energy/tariffs/compare",
      "method": "POST",
      "description": "Comparar tarifas",
      "success": false,
      "result": {
        "status_code": 500,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "x-cloud-trace-context": "925ac4b59e7a5a2e28aa64284a0740af",
          "date": "Tue, 05 Aug 2025 15:07:37 GMT",
          "server": "Google Frontend",
          "Content-Length": "244",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 173.977,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/energy/tariffs/compare",
        "method": "POST",
        "json": {
          "category": "server_error",
          "error_code": 500,
          "error_id": "55abdbd4",
          "message": "Error interno del servidor. Por favor, inténtalo más tarde.",
          "service": "energy_ia_api_copy",
          "status": "error",
          "timestamp": "2025-08-05T17:07:37.922883+02:00"
        }
      },
      "timestamp": "2025-08-05T15:07:37.007360+00:00"
    },
    {
      "endpoint": "/api/v1/links/test",
      "method": "POST",
      "description": "Test enlaces",
      "success": false,
      "result": {
        "status_code": 400,
        "headers": {
          "content-type": "application/json",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "c648d8ab4615a8e10e7fb38512ea95df",
          "date": "Tue, 05 Aug 2025 15:07:38 GMT",
          "server": "Google Frontend",
          "Content-Length": "61",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 134.584,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/links/test",
        "method": "POST",
        "json": {
          "error": "Campo 'response_text' requerido",
          "status": "error"
        }
      },
      "timestamp": "2025-08-05T15:07:37.660624+00:00"
    },
    {
      "endpoint": "/api/v1/links/status",
      "method": "GET",
      "description": "Estado enlaces",
      "success": true,
      "result": {
        "status_code": 200,
        "headers": {
          "content-type": "application/json",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "8244d555a3756a0baa7adc41636a3b0f",
          "date": "Tue, 05 Aug 2025 15:07:39 GMT",
          "server": "Google Frontend",
          "Content-Length": "188",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 105.696,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/links/status",
        "method": "GET",
        "json": {
          "available_links": [
            "blog",
            "dashboard",
            "calculator",
            "contact",
            "terms",
            "privacy"
          ],
          "links_configured": 6,
          "service_name": "EnterpriseLinkService",
          "status": "active",
          "version": "2025_enterprise"
        }
      },
      "timestamp": "2025-08-05T15:07:38.281442+00:00"
    },
    {
      "endpoint": "/api/v1/links/direct/admin",
      "method": "GET",
      "description": "Enlace directo admin",
      "success": false,
      "result": {
        "status_code": 404,
        "headers": {
          "content-type": "application/json",
          "x-content-type-options": "nosniff",
          "x-frame-options": "DENY",
          "x-xss-protection": "1; mode=block",
          "strict-transport-security": "max-age=31536000; includeSubDomains",
          "x-api-version": "2025.1.0",
          "x-service-name": "energy_ia_api_copy",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "809ae0267fc30728463685b778bf4e88",
          "date": "Tue, 05 Aug 2025 15:07:39 GMT",
          "server": "Google Frontend",
          "Content-Length": "156",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 172.94,
        "url": "https://energy-ia-api-1010012211318.europe-west1.run.app/api/v1/links/direct/admin",
        "method": "GET",
        "json": {
          "available_types": [
            "blog",
            "dashboard",
            "calculator",
            "weather",
            "contact",
            "terms",
            "privacy"
          ],
          "error": "Tipo de enlace 'admin' no encontrado",
          "status": "error"
        }
      },
      "timestamp": "2025-08-05T15:07:38.986018+00:00"
    },
    {
      "endpoint": "/health",
      "method": "GET",
      "description": "Health check principal",
      "success": true,
      "result": {
        "status_code": 200,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "17cab8bafc6c59fc2ba3a6ec34688fe2",
          "date": "Tue, 05 Aug 2025 15:07:40 GMT",
          "server": "Google Frontend",
          "Content-Length": "111",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 179.66299999999998,
        "url": "https://expert-bot-api-1010012211318.europe-west1.run.app/health",
        "method": "GET",
        "json": {
          "mode": "production",
          "status": "healthy",
          "timestamp": "2025-08-05T15:07:40.615692",
          "version": "2.0.0-enterprise"
        }
      },
      "timestamp": "2025-08-05T15:07:39.687737+00:00"
    },
    {
      "endpoint": "/health/detailed",
      "method": "GET",
      "description": "Health check detallado",
      "success": true,
      "result": {
        "status_code": 200,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "d03990d539b484047a06db9803f507f0",
          "date": "Tue, 05 Aug 2025 15:07:41 GMT",
          "server": "Google Frontend",
          "Content-Length": "179",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 113.528,
        "url": "https://expert-bot-api-1010012211318.europe-west1.run.app/health/detailed",
        "method": "GET",
        "json": {
          "config": "production",
          "enterprise_mode": true,
          "firebase_initialized": true,
          "startup_time": "2025-08-05T14:24:57.271299",
          "status": "healthy",
          "timestamp": "2025-08-05T15:07:41.239324"
        }
      },
      "timestamp": "2025-08-05T15:07:40.309372+00:00"
    },
    {
      "endpoint": "/api/v1/analysis/sentiment",
      "method": "POST",
      "description": "Análisis sentimiento",
      "success": false,
      "result": {
        "status_code": 500,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "37c0046389cc7bcd8eb8534afffc1bef",
          "date": "Tue, 05 Aug 2025 15:07:42 GMT",
          "server": "Google Frontend",
          "Content-Length": "192",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 290.601,
        "url": "https://expert-bot-api-1010012211318.europe-west1.run.app/api/v1/analysis/sentiment",
        "method": "POST",
        "json": {
          "error": {
            "category": "authentication",
            "error_id": "36ad2c62-2b23-4326-abf7-b7ceb02085ca",
            "level": "high",
            "message": "Error de autenticación",
            "timestamp": "2025-08-05T15:07:42.046921+00:00"
          }
        }
      },
      "timestamp": "2025-08-05T15:07:41.114747+00:00"
    },
    {
      "endpoint": "/api/v1/chatbot/session/start",
      "method": "POST",
      "description": "Iniciar sesión chat",
      "success": true,
      "result": {
        "status_code": 200,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "b1a8a5a58fd098634cef421b4e973338",
          "date": "Tue, 05 Aug 2025 15:07:42 GMT",
          "server": "Google Frontend",
          "Content-Length": "614",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 416.48400000000004,
        "url": "https://expert-bot-api-1010012211318.europe-west1.run.app/api/v1/chatbot/session/start",
        "method": "POST",
        "json": {
          "enterprise_features": [
            "ml_recommendations",
            "hybrid_consultation",
            "feedback_analysis"
          ],
          "message": "Sesión empresarial iniciada correctamente",
          "session_id": "942c211f-fa9a-4a3d-861f-1f41eb9b70f9",
          "status": "success",
          "welcomeMessage": {
            "content": "Buenas tardes, son las 17:07.\n\nSoy WattBot, tu asistente energético. Puedo ayudarte con consultas sobre energía, análisis de consumo y recomendaciones para optimizar tu factura.\n\n¿En qué puedo ayudarte hoy?",
            "id": "welcome_1754406462",
            "personalized": false,
            "premium_data": false,
            "timestamp": "2025-08-05T17:07:42.792161+02:00",
            "type": "bot"
          }
        }
      },
      "timestamp": "2025-08-05T15:07:42.037370+00:00"
    },
    {
      "endpoint": "/api/v1/chatbot/message",
      "method": "POST",
      "description": "Mensaje chat",
      "success": true,
      "result": {
        "status_code": 200,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "1dc5a558d2fc4518c7de038b23c22cd4",
          "date": "Tue, 05 Aug 2025 15:07:44 GMT",
          "server": "Google Frontend",
          "Content-Length": "475",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 566.9960000000001,
        "url": "https://expert-bot-api-1010012211318.europe-west1.run.app/api/v1/chatbot/message",
        "method": "POST",
        "json": {
          "action": "emergency_response",
          "context_quality": {
            "available_sources_count": 0,
            "data_completeness": 0,
            "personalization_applied": true
          },
          "intent": "enterprise_fallback",
          "message_analysis": {
            "complexity": 1,
            "contains_question": false,
            "length": 4,
            "technical_terms": false,
            "urgency_detected": false
          },
          "response": "Estoy experimentando dificultades técnicas temporales. Por favor, intenta nuevamente en unos momentos.",
          "source": "enterprise_fallback_system",
          "status": "fallback_activated"
        }
      },
      "timestamp": "2025-08-05T15:07:43.109967+00:00"
    },
    {
      "endpoint": "/api/v1/chatbot/new-conversation",
      "method": "POST",
      "description": "Nueva conversación",
      "success": true,
      "result": {
        "status_code": 200,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "bcca3269a388234c2d6bb7af2f179e16;o=1",
          "date": "Tue, 05 Aug 2025 15:07:45 GMT",
          "server": "Google Frontend",
          "Content-Length": "405",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 1040.0990000000002,
        "url": "https://expert-bot-api-1010012211318.europe-west1.run.app/api/v1/chatbot/new-conversation",
        "method": "POST",
        "json": {
          "conversation_id": "119ee4a0-7ff8-4768-a9ce-ca4cd6cf2e5f",
          "enterprise_features": [
            "ml_recommendations",
            "hybrid_consultation",
            "conversation_management"
          ],
          "message": "Nueva conversación creada correctamente",
          "previous_conversation_id": "test-conv-old",
          "previous_conversation_saved": true,
          "session_id": "119ee4a0-7ff8-4768-a9ce-ca4cd6cf2e5f",
          "status": "success",
          "timestamp": "2025-08-05T15:07:45.590735+00:00"
        }
      },
      "timestamp": "2025-08-05T15:07:44.658063+00:00"
    },
    {
      "endpoint": "/api/v1/energy/consumption",
      "method": "POST",
      "description": "Subir factura consumo",
      "success": false,
      "result": {
        "status_code": 400,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "761b95db381907584251a900747472f5",
          "date": "Tue, 05 Aug 2025 15:07:46 GMT",
          "server": "Google Frontend",
          "Content-Length": "458",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 295.38399999999996,
        "url": "https://expert-bot-api-1010012211318.europe-west1.run.app/api/v1/energy/consumption",
        "method": "POST",
        "json": {
          "alternative_action": {
            "description": "También puedes introducir tus datos manualmente",
            "endpoint": "/manual-data",
            "required_fields": [
              "kwh_consumidos",
              "potencia_contratada_kw"
            ],
            "type": "manual_input"
          },
          "help_message": "Si tienes problemas subiendo el archivo, puedes introducir los datos manualmente usando el botón 'Entrada Manual' en la aplicación.",
          "message": "Por favor, selecciona una factura de electricidad para continuar.",
          "status": "error"
        }
      },
      "timestamp": "2025-08-05T15:07:45.465610+00:00"
    },
    {
      "endpoint": "/api/v1/energy/consumption",
      "method": "POST",
      "description": "Upload factura PDF REAL",
      "success": false,
      "result": {
        "status_code": 500,
        "headers": {
          "content-type": "application/json",
          "access-control-allow-origin": "https://smarwatt.com",
          "access-control-allow-credentials": "true",
          "x-cloud-trace-context": "5752ef7f1fa449f76a2c4017cdf5c775",
          "date": "Tue, 05 Aug 2025 15:08:01 GMT",
          "server": "Google Frontend",
          "Content-Length": "192",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "response_time_ms": 14892.495,
        "url": "https://expert-bot-api-1010012211318.europe-west1.run.app/api/v1/energy/consumption",
        "method": "POST",
        "json": {
          "error": {
            "category": "authentication",
            "error_id": "07756138-7aff-44d5-b0a8-3687268079cb",
            "level": "high",
            "message": "Error de autenticación",
            "timestamp": "2025-08-05T15:08:01.795268+00:00"
          }
        }
      },
      "timestamp": "2025-08-05T15:08:00.884245+00:00"
    }
  ],
  "start_time": "2025-08-05T15:07:05.208933+00:00",
  "end_time": "2025-08-05T15:08:00.885853+00:00"
}