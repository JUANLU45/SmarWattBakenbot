{
  "openapi": "3.0.3",
  "info": {
    "title": "SmarWatt Microservices API",
    "description": "API completa para an√°lisis energ√©tico y chatbot inteligente",
    "version": "2.0.0",
    "contact": {
      "name": "SmarWatt Team",
      "email": "dev@smarwatt.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:5000",
      "description": "Energy IA API Development"
    },
    {
      "url": "http://localhost:5001",
      "description": "Expert Bot API Development"
    }
  ],
  "paths": {
    "/tariffs/recommendations": {
      "get": {
        "summary": "GET /tariffs/recommendations",
        "description": "Endpoint principal - Recomendaci√≥n de tarifas EXTRA empresarial",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/tariffs/market-data": {
      "get": {
        "summary": "GET /tariffs/market-data",
        "description": "Endpoint para obtener datos del mercado de tarifas",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/admin/tariffs/add": {
      "post": {
        "summary": "POST /admin/tariffs/add",
        "description": "Endpoint ADMIN para agregar datos de tarifas directamente",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      },
      "options": {
        "summary": "OPTIONS /admin/tariffs/add",
        "description": "Endpoint ADMIN para agregar datos de tarifas directamente",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/admin/tariffs/batch-add": {
      "post": {
        "summary": "POST /admin/tariffs/batch-add",
        "description": "Endpoint ADMIN para agregar m√∫ltiples tarifas en lote",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      },
      "options": {
        "summary": "OPTIONS /admin/tariffs/batch-add",
        "description": "Endpoint ADMIN para agregar m√∫ltiples tarifas en lote",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/tariffs/compare": {
      "post": {
        "summary": "POST /tariffs/compare",
        "description": "Endpoint para comparar tarifas espec√≠ficas",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      },
      "options": {
        "summary": "OPTIONS /tariffs/compare",
        "description": "Endpoint para comparar tarifas espec√≠ficas",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/message": {
      "post": {
        "summary": "POST /message",
        "description": "Endpoint que recibe cada mensaje del usuario y orquesta la respuesta.\n    ID√âNTICO AL ORIGINAL - PROHIBIDO CAMBIAR",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      },
      "options": {
        "summary": "OPTIONS /message",
        "description": "Endpoint que recibe cada mensaje del usuario y orquesta la respuesta.\n    ID√âNTICO AL ORIGINAL - PROHIBIDO CAMBIAR",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/message/v2": {
      "post": {
        "summary": "POST /message/v2",
        "description": "Endpoint mejorado con contexto directo desde expert-bot",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/cross-service": {
      "post": {
        "summary": "POST /cross-service",
        "description": "Endpoint para comunicaci√≥n directa entre servicios",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/conversations": {
      "get": {
        "summary": "GET /conversations",
        "description": "Endpoint para obtener conversaciones del usuario con robustez empresarial",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/conversations/<conversation_id>": {
      "delete": {
        "summary": "DELETE /conversations/<conversation_id>",
        "description": "Endpoint para borrar conversaci√≥n espec√≠fica empresarial",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "GET /health",
        "description": "Health check empresarial completo del chatbot",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/v1/links/test": {
      "post": {
        "summary": "POST /api/v1/links/test",
        "description": "üîó Endpoint de prueba para sistema de enlaces inteligentes\n\n    Body:\n    {\n        \"response_text\": \"Tu mensaje de prueba aqu√≠\"\n    }\n\n    Returns:\n    {\n        \"original_response\": \"texto original\",\n        \"enhanced_response\": \"texto con enlaces\",\n        \"links_added\": true/false,\n        \"service_status\": {...}\n    }",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/links/status": {
      "get": {
        "summary": "GET /api/v1/links/status",
        "description": "üìä Obtener estado del servicio de enlaces empresarial\n\n    Returns:\n    {\n        \"service_status\": {...},\n        \"available_links\": [...],\n        \"version\": \"...\"\n    }",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/v1/links/direct/<link_type>": {
      "get": {
        "summary": "GET /api/v1/links/direct/<link_type>",
        "description": "üîó Obtener enlace directo por tipo\n\n    Args:\n        link_type: blog, dashboard, calculator, weather, contact, terms, privacy\n\n    Returns:\n    {\n        \"link_type\": \"...\",\n        \"url\": \"...\",\n        \"status\": \"success\"\n    }",
        "tags": [
          "Energy IA API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/session/start": {
      "post": {
        "summary": "POST /session/start",
        "description": "Endpoint para iniciar el chat, como espera el frontend.\n    ID√âNTICO AL ORIGINAL - PROHIBIDO CAMBIAR",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      },
      "options": {
        "summary": "OPTIONS /session/start",
        "description": "Endpoint para iniciar el chat, como espera el frontend.\n    ID√âNTICO AL ORIGINAL - PROHIBIDO CAMBIAR",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/new-conversation": {
      "post": {
        "summary": "POST /new-conversation",
        "description": "ENDPOINT EMPRESARIAL: Crear nueva conversaci√≥n guardando la actual.\n    Funcionalidad para bot√≥n \"Nueva Conversaci√≥n\" del frontend.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      },
      "options": {
        "summary": "OPTIONS /new-conversation",
        "description": "ENDPOINT EMPRESARIAL: Crear nueva conversaci√≥n guardando la actual.\n    Funcionalidad para bot√≥n \"Nueva Conversaci√≥n\" del frontend.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/conversation/history": {
      "get": {
        "summary": "GET /conversation/history",
        "description": "NUEVO ENDPOINT EMPRESARIAL: Recuperar historial de conversaciones del usuario.\n    Funcionalidad solicitada para nivel empresarial.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/conversation/<conversation_id>": {
      "delete": {
        "summary": "DELETE /conversation/<conversation_id>",
        "description": "NUEVO ENDPOINT EMPRESARIAL: Borrar conversaci√≥n espec√≠fica.\n    Funcionalidad solicitada para nivel empresarial.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      },
      "options": {
        "summary": "OPTIONS /conversation/<conversation_id>",
        "description": "NUEVO ENDPOINT EMPRESARIAL: Borrar conversaci√≥n espec√≠fica.\n    Funcionalidad solicitada para nivel empresarial.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/conversation/feedback": {
      "post": {
        "summary": "POST /conversation/feedback",
        "description": "NUEVO ENDPOINT EMPRESARIAL: Enviar feedback de conversaci√≥n.\n    Funcionalidad para aprendizaje autom√°tico empresarial.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      },
      "options": {
        "summary": "OPTIONS /conversation/feedback",
        "description": "NUEVO ENDPOINT EMPRESARIAL: Enviar feedback de conversaci√≥n.\n    Funcionalidad para aprendizaje autom√°tico empresarial.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/metrics": {
      "get": {
        "summary": "GET /metrics",
        "description": "NUEVO ENDPOINT EMPRESARIAL: Obtener m√©tricas de usuario.\n    Funcionalidad para an√°lisis y monitorizaci√≥n empresarial.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/consumption": {
      "post": {
        "summary": "POST /consumption",
        "description": "Endpoint ULTRA-ROBUSTO para subir facturas de consumo.\n    NUNCA falla y SIEMPRE ofrece alternativas amables al usuario.\n    Garantiza m√°ximo valor y experiencia perfecta.\n\n    ID√âNTICO AL ORIGINAL - PROHIBIDO CAMBIAR",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/dashboard": {
      "get": {
        "summary": "GET /dashboard",
        "description": "Endpoint ULTRA-ROBUSTO para obtener datos del panel.\n    NUNCA falla y SIEMPRE proporciona datos √∫tiles al usuario.\n\n    ID√âNTICO AL ORIGINAL - PROHIBIDO CAMBIAR",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/users/profile": {
      "get": {
        "summary": "GET /users/profile",
        "description": "Endpoint para obtener el perfil de usuario con datos de consumo.\n    Usado por energy_ia_api para obtener datos del usuario.\n\n    ID√âNTICO AL ORIGINAL - PROHIBIDO CAMBIAR",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/manual-data": {
      "post": {
        "summary": "POST /manual-data",
        "description": "NUEVO ENDPOINT REAL: Permite entrada manual cuando OCR falla o es incompleto.\n    Da VALOR INMEDIATO al usuario que no puede usar OCR por cualquier motivo.\n\n    ID√âNTICO AL ORIGINAL - PROHIBIDO CAMBIAR",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/consumption/update": {
      "put": {
        "summary": "PUT /consumption/update",
        "description": "NUEVO ENDPOINT EMPRESARIAL: Actualizar datos de consumo existentes.\n    Permite actualizar datos sin subir nueva factura.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/consumption/history": {
      "get": {
        "summary": "GET /consumption/history",
        "description": "NUEVO ENDPOINT EMPRESARIAL: Obtener historial de consumos del usuario.\n    Funcionalidad empresarial para an√°lisis de patrones.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/consumption/analyze": {
      "post": {
        "summary": "POST /consumption/analyze",
        "description": "NUEVO ENDPOINT EMPRESARIAL: An√°lisis avanzado de consumo con IA.\n    Proporciona insights inteligentes sobre patrones de consumo.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/consumption/recommendations": {
      "get": {
        "summary": "GET /consumption/recommendations",
        "description": "NUEVO ENDPOINT EMPRESARIAL: Obtener recomendaciones personalizadas.\n    Basadas en IA y aprendizaje autom√°tico.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/consumption/compare": {
      "post": {
        "summary": "POST /consumption/compare",
        "description": "NUEVO ENDPOINT EMPRESARIAL: Comparar tarifas el√©ctricas.\n    An√°lisis inteligente de tarifas con recomendaciones personalizadas.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/consumption/title": {
      "put": {
        "summary": "PUT /consumption/title",
        "description": "NUEVO ENDPOINT EMPRESARIAL: Cambiar t√≠tulo de conversaci√≥n energ√©tica.\n    Permite personalizar t√≠tulos para mejor organizaci√≥n.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analysis/sentiment": {
      "post": {
        "summary": "POST /api/v1/analysis/sentiment",
        "description": "Endpoint empresarial para an√°lisis de sentiment avanzado.\n    Expone el m√©todo analyze_sentiment_enterprise v√≠a HTTP para microservicios independientes.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      },
      "options": {
        "summary": "OPTIONS /api/v1/analysis/sentiment",
        "description": "Endpoint empresarial para an√°lisis de sentiment avanzado.\n    Expone el m√©todo analyze_sentiment_enterprise v√≠a HTTP para microservicios independientes.",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/user/tasks": {
      "get": {
        "summary": "GET /user/tasks",
        "description": "üè¢ DASHBOARD DE TAREAS AS√çNCRONAS PARA USUARIO\n\n    VALOR ALTO PARA EL USUARIO:\n    ‚úÖ Estado en tiempo real de sus tareas (facturas, an√°lisis, reportes)\n    ‚úÖ Progreso visual de procesamiento ML y an√°lisis de datos\n    ‚úÖ Historial personalizado de tareas completadas\n    ‚úÖ Tiempo estimado de finalizaci√≥n\n    ‚úÖ Notificaciones de tareas completadas o fallidas\n    ‚úÖ M√©tricas personales de productividad\n    ‚úÖ Acceso a resultados de tareas completadas",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      },
      "post": {
        "summary": "POST /user/tasks",
        "description": "üè¢ CREAR TAREA AS√çNCRONA PARA USUARIO\n\n    Permite al usuario crear tareas de alto valor como:\n    ‚úÖ Procesamiento de facturas energ√©ticas\n    ‚úÖ An√°lisis de datos de consumo personalizados\n    ‚úÖ Generaci√≥n de reportes de ahorro\n    ‚úÖ Actualizaci√≥n de perfil energ√©tico\n    ‚úÖ An√°lisis de rendimiento personalizado",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/user/tasks/<task_id>": {
      "get": {
        "summary": "GET /user/tasks/<task_id>",
        "description": "üè¢ Obtener estado detallado de tarea espec√≠fica del usuario",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/admin/system/metrics": {
      "get": {
        "summary": "GET /admin/system/metrics",
        "description": "üè¢ M√âTRICAS EMPRESARIALES COMPLETAS PARA ADMINISTRADORES\n\n    VALOR ALTO PARA ADMINISTRADORES:\n    ‚úÖ Dashboard completo de rendimiento del sistema\n    ‚úÖ M√©tricas de workers y throughput en tiempo real\n    ‚úÖ An√°lisis de carga y optimizaci√≥n de recursos\n    ‚úÖ Estad√≠sticas de fallos y reintentos por tipo de tarea\n    ‚úÖ Tendencias de uso y patrones de demanda\n    ‚úÖ Alertas de rendimiento y recomendaciones\n    ‚úÖ M√©tricas de SLA y tiempos de respuesta\n    ‚úÖ An√°lisis de usuarios m√°s activos y patrones de uso",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/admin/tasks/management": {
      "get": {
        "summary": "GET /admin/tasks/management",
        "description": "üè¢ GESTI√ìN AVANZADA DE TAREAS PARA ADMINISTRADORES\n\n    VALOR ADMINISTRATIVO ALTO:\n    ‚úÖ Vista completa de todas las tareas del sistema\n    ‚úÖ Capacidad de filtrar por usuario, estado, tipo, fecha\n    ‚úÖ Herramientas de gesti√≥n: cancelar, reintentar, repriorizar\n    ‚úÖ An√°lisis de patrones de fallo y optimizaci√≥n\n    ‚úÖ Gesti√≥n de carga de trabajo y balanceo\n    ‚úÖ Estad√≠sticas por usuario y departamento",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/links/test": {
      "post": {
        "summary": "POST /links/test",
        "description": "üîó Endpoint de prueba para sistema de enlaces inteligentes\n\n    Body:\n    {\n        \"response_text\": \"Tu mensaje de prueba aqu√≠\"\n    }\n\n    Returns:\n    {\n        \"original_response\": \"texto original\",\n        \"enhanced_response\": \"texto con enlaces\",\n        \"links_added\": true/false,\n        \"service_status\": {...}\n    }",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "message": {
                    "type": "string",
                    "example": "Mensaje de ejemplo"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/links/status": {
      "get": {
        "summary": "GET /links/status",
        "description": "üìä Obtener estado del servicio de enlaces empresarial\n\n    Returns:\n    {\n        \"service_status\": {...},\n        \"available_links\": [...],\n        \"version\": \"...\"\n    }",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/links/direct/<link_type>": {
      "get": {
        "summary": "GET /links/direct/<link_type>",
        "description": "üîó Obtener enlace directo por tipo\n\n    Args:\n        link_type: blog, dashboard, calculator, weather, contact, terms, privacy\n\n    Returns:\n    {\n        \"link_type\": \"...\",\n        \"url\": \"...\",\n        \"status\": \"success\"\n    }",
        "tags": [
          "Expert Bot API"
        ],
        "responses": {
          "200": {
            "description": "Operaci√≥n exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Error en la petici√≥n"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Token JWT de autenticaci√≥n de Firebase"
      }
    }
  }
}